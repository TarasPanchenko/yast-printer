/**
 * File:
 *  deletePrinter.ycp
 *
 * Module:
 *  Printer configurator
 *
 * Summary:
 *  Miscelaneous tests.
 *
 * Authors:
 *  Petr Blahos <pblahos@suse.cz>
 *
 * $Id$
 *
 */

{
    import "Pkg";

    include "testsuite.ycp";
    import "Printer";

    Printer::printcap = [
	$[ "name" : "1", ],
	$[ "name" : "2", ],
	$[ "name" : "3", ],
	$[ "name" : "4", ],
	];
    Printer::index = 0;
    Printer::deletePrinter ();
    DUMP (Printer::printcap);
    DUMP (Printer::DeletedNames ());

    Printer::printcap = [
	$[ "name" : "1", "saved" : $[ "printcap_part" : "yes"]],
	$[ "name" : "2", ],
	$[ "name" : "3", ],
	$[ "name" : "4", ],
	];
    Printer::index = 0;
    Printer::deletePrinter ();
    DUMP (Printer::printcap);
    DUMP (Printer::DeletedNames ());

    Printer::deleted = [
    $[
      "name" : "draft",
      "states" : $[
        "cups-state" : "commited",
        "lprng-state" : "changed"
      ],
      "type" : "printer"
    ],
    $[
      "name" : "normal",
      "states" : $[
        "cups-state" : "commited",
        "lprng-state" : "changed"
      ],
      "type" : "printer"
    ],
    $[
      "name" : "photo",
      "states" : $[
        "cups-state" : "commited",
        "lprng-state" : "changed"
      ],
      "type" : "printer"
    ],
     $[
      "name" : "draft",
      "states" : $[
        "cups-state" : "commited",
        "lprng-state" : "commited"
      ],
      "type" : "printer"
    ],
    ];

    Printer::removeDuplicatedDeletedPrinters ();
    DUMP (Printer::deleted);

    Printer::deleted = add (Printer::deleted, $[
      "name" : "photo",
      "states" : $[
        "cups-state" : "changed",
        "lprng-state" : "changed"
      ],
      "type" : "printer"
    ]);

    Printer::removeDuplicatedDeletedPrinters ();
    DUMP (Printer::deleted);
}
