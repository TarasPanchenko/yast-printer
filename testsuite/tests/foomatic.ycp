/**
 * File:
 *  foomatic.ycp
 *
 * Module:
 *  Printer configurator
 *
 * Summary:
 *  Foomatic data manipulation tests
 *
 * Authors:
 *  Jiri Srain <jsrain@suse.cz>
 *
 * $Id$
 *
 */

{
    include "testsuite.ycp";
    import "Pkg";
    include "printer/misc.ycp";
    import "Printer";
    import "Mode";

    Mode::test = true;

    map READ = $[
	"ppd" : $[
	    "db" : $[
		"vendorname" : "EPSON",
		"modelname" : "STYLUSPHOTO810",
		"changed" : false,
	    ]
	],
	"target" : $[
	    "ycp" : $["__default__": [ ".*hpijs.*", ".*gimp.*", ".*escp.*", ".*upp.*", ".*cdj[0-9].*", ".*pcl3.*"]]
	]
    ];

    DUMP ("========================================");

    TEST (``(getFoomaticDefaultQueue ([$["name" : "queue1"], $["name" : "queue2"]])), [], 0);
    TEST (``(getFoomaticDefaultQueue ([$["name" : "queue1"], $["name" : "normal"]])), [], 0);
    TEST (``(getFoomaticDefaultQueue ([$["name" : "queue1"], $["name" : "normal3"]])), [], 0);
    TEST (``(getFoomaticDefaultQueue ([$["name" : "queue1"], $["name" : "normal_gray"]])), [], 0);
    TEST (``(getFoomaticDefaultQueue ([$["name" : "normal"], $["name" : "normal2"]])), [], 0);
    TEST (``(getFoomaticDefaultQueue ([$["name" : "normal1"], $["name" : "normal"]])), [], 0);

    DUMP ("========================================");

    TEST (``(sortPpds ("EPSON", "Stylus Photo 810", ["P1 (recommended)", "P2"])), [READ, $[], $[]], 0);
    TEST (``(sortPpds ("EPSON", "Stylus Photo 810", ["P1", "P2"])), [READ, $[], $[]], 0);
    TEST (``(sortPpds ("EPSON", "Stylus Photo 810", ["P1", "P2 (recommended)"])), [READ, $[], $[]], 0);

    DUMP ("========================================");

    TEST (``(sortPpds ("EPSON", "Stylus Photo 810", ["XXgimpXX", "YYhpijsYY", "ZZpcl3ZZ", "QQcdj3QQ"])), [READ, $[], $[]], 0);
    TEST (``(sortPpds ("EPSON", "Stylus Photo 810", ["XXgimpXX", "YYhpijsYY", "ZZpcl3ZZ (recommended)", "QQcdj3QQ"])), [READ, $[], $[]], 0);
    TEST (``(sortPpds ("EPSON", "Stylus Photo 810", ["XXgimpXX", "YYhpijsYY (recommended)", "ZZpcl3ZZ", "QQcdj3QQ  (recommended)"])), [READ, $[], $[]], 0);
    TEST (``(sortPpds ("EPSON", "Stylus Photo 810", ["XXgimpXX (recommended)", "YYhpijsYY (recommended)", "ZZpcl3ZZ (recommended)", "QQcdj3QQ (recommended)"])), [READ, $[], $[]], 0);

    DUMP ("========================================");

    Printer::spooler = "cups";

    TEST (``(getAutoPpdFile ("EPSON", "Stylus Photo 810", ["P1 (recommended)", "P2"])), [READ, $[], $[]], 0);
    TEST (``(getAutoPpdFile ("EPSON", "Stylus Photo 810", ["P1", "P2"])), [READ, $[], $[]], 0);
    TEST (``(getAutoPpdFile ("EPSON", "Stylus Photo 810", ["P1", "P2 (recommended)"])), [READ, $[], $[]], 0);

    DUMP ("========================================");

    TEST (``(getAutoPpdFile ("EPSON", "Stylus Photo 810", ["XXgimpXX", "YYhpijsYY", "ZZpcl3ZZ", "QQcdj3QQ"])), [READ, $[], $[]], 0);
    TEST (``(getAutoPpdFile ("EPSON", "Stylus Photo 810", ["XXgimpXX", "YYhpijsYY", "ZZpcl3ZZ (recommended)", "QQcdj3QQ"])), [READ, $[], $[]], 0);
    TEST (``(getAutoPpdFile ("EPSON", "Stylus Photo 810", ["XXgimpXX", "YYhpijsYY (recommended)", "ZZpcl3ZZ", "QQcdj3QQ  (recommended)"])), [READ, $[], $[]], 0);
    TEST (``(getAutoPpdFile ("EPSON", "Stylus Photo 810", ["XXgimpXX (recommended)", "YYhpijsYY (recommended)", "ZZpcl3ZZ (recommended)", "QQcdj3QQ (recommended)"])), [READ, $[], $[]], 0);

    DUMP ("========================================");



}
