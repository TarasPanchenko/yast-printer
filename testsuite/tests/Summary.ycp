/**
 * File:
 *  Summary.ycp
 *
 * Module:
 *  Printer configurator
 *
 * Summary:
 *  Miscelaneous tests.
 *
 * Authors:
 *  Petr Blahos <pblahos@suse.cz>
 *
 * $Id$
 *
 */

{
    import "Pkg";

    include "testsuite.ycp";
    map I_READ = $[
	"target" : $[
	    "size" : -1,
	    "tmpdir" : "/tmp/",
	    "yast2" : nil,
	],
	"sysconfig" : $[
	    "console" : $[
		"CONSOLE_FONT" : "",
		"CONSOLE_SCREENMAP" : "",
		"CONSOLE_UNICODEMAP" : "",
		"CONSOLE_MAGIC" : "",
		"CONSOLE_ENCODING" : "",
	    ],
	    "language" : $[
		"RC_LANG" : "",
		"DEFAULT_LANGUAGE" : "",
	    ],
	],
	"etc" : $[
	    "install_inf" : $[
		"Cmdline" : "",
		"InstMode" : nil,
	    ],
	],
	"probe" : $[
	    "architecture" : "i386",
	    "has_apm" : true,
	    "has_pcmcia" : false,
	    "has_smp" : false,
	    "system" : [],
	    "memory" : [],
	    "cpu" : [],
	    "cdrom" : $[
		"manual" : [],
	    ],
	    "floppy" : $[
		"manual" : [],
	    ],
	],
    ];
    map I_WRITE = $[];
    map I_EXEC = $[
	"target" : $[
	    "bash_output" : $[],
	],
    ];
    TESTSUITE_INIT ([I_READ, I_WRITE, I_EXEC], 0);
    import "Printer";
    TESTSUITE_CLEAN ();

    map READ = $["printerdb" : $[ "printername" : "- fake name -"],
		 "ppd" : $["file" : $["isppd" : false ]]];
    map WRITE = $[];
    map EXEC = $[];

    Printer::printcap = [
	$[ "name" : "lp", "unique_key" : "1", "uri" : "parallel:/dev/lp0", "vendor_ieee": "Canon", "device_ieee":"BJC-6100", ],
	$[ "name" : "color", "unique_key" : "1", "uri" : "parallel:/dev/lp0", "vendor_ieee": "Canon", "device_ieee":"BJC-6100",],

	$[ "name" : "mono", "unique_key" : "2", "uri" : "usb:/dev/usb/lp0", "vendor_ieee": "hewlett-packard", "device_ieee":"hp-laserjet-4", "ppd_info" : $[ "manufacturer" : "hewlett-packard", "model" : "hp-laserjet-4" ]],

	$[ "name" : "hand", "uri" : "usb:/dev/usb/lp1", "vendor_ieee":"epson", "device_ieee": "generic-gdi", "ppd_info" : $["manufacturer" : "epson", "model" : "generic-gdi", ]],

	];
    Printer::autodetected = [
	$["vendor":"Canon","device":"BJC-6100","unique_key":"1","uri":"parallel:/dev/lp0"],
	$["vendor":"Epson","device":"Stylus","unique_key":"3","uri":"usb:/dev/usb/lp1"],
	];

    TEST (``(Printer::Summary ([`short])), [READ, WRITE, EXEC], 0);
}
