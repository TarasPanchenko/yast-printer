<?xml version="1.0" encoding='ISO-8859-1'?>
<chapter id = "structures">
  <title>Internal Structures</title>
  <section id="queue_struct">
    <title>Queue Structure</title>
    <para>
The information about a queue is stored as a map with the following keys:
    </para>
    <itemizedlist>
      <listitem><para><computeroutput>
"name" : string
      </computeroutput>
contains name of the printer queue
      </para></listitem>
      <listitem><para><computeroutput>
"uri" : string
      </computeroutput>
contains the URI of the printer. The URI can be then passed to the
spooler. The URI for CUPS classes is "class".
      </para></listitem>
      <listitem><para><computeroutput>
"accepting" : boolean
      </computeroutput>
is true if the queue is accepting jobs, false otherwise
      </para></listitem>
      <listitem><para><computeroutput>
"bannerstart" : string
      </computeroutput>
is the name of the banner page to be printed at the beginning of each job. The available
banners are files under /usr/share/cups/banners
      </para></listitem>
      <listitem><para><computeroutput>
"bannerend" : string
      </computeroutput>
is the name of the banner page to be printed after each job. The available
banners are the same as for <computeroutput>bannerstart</computeroutput>
      </para></listitem>
      <listitem><para><computeroutput>
"allowusers" : list&lt;string&gt;
      </computeroutput>
is a list of users allowed to printing.
Only one of <computeroutput>"allowusers"</computeroutput>
and <computeroutput>"denyusers"</computeroutput> can be set.
If none of them is set, all users are allowed to print.
      </para></listitem>
      <listitem><para><computeroutput>
"denyusers" : list&lt;string&gt;
      </computeroutput>
is a list of users not allowed to printing.
Only one of <computeroutput>"allowusers"</computeroutput>
and <computeroutput>"denyusers"</computeroutput> can be set.
If none of them is set, all users are allowed to print.
      </para></listitem>
      <listitem><para><computeroutput>
"info" : string
      </computeroutput>
contains a human-readable information about the printer queue
      </para></listitem>
      <listitem><para><computeroutput>
"location" : string
      </computeroutput>
contains a description of the location of the printer queue
      </para></listitem>
      <listitem><para><computeroutput>
      </computeroutput>
      </para></listitem>

<!--
$[ "changed":false, "default":false, "options":$["job-sheets":"none,none"], "ppd":"/tmp/YaST2-32319-Qvl4zv/ppd_fCkjkR3", "ppd_info":$["filter":"foomatic-rip", "lang_encoding":
"ISOLatin1", "lang_version":"English", "language_level":3, "manufacturer":"Epson", "manufacturer_db":"EPSON", "model":" Stylus Photo 810", "model_db":"STYL
USPHOTO810", "nick":"Epson Stylus Photo 810 Foomatic/gimp-print (recommended)"], "ppd_options":$[], "raw":false, "state":"idle", "statemessage":"", "type":
"yast2", "uri":"usb://EPSON/Stylus%20Photo%20810", "valid":true], $["accepting":true, "allowusers":[], "bannerend":"none", "bannerstart":"none", "changed":
false, "default":false, "denyusers":[], "info":"EPSON Stylus Photo 810", "location":"USB tisk\303\241rna na //EPSON/Stylus%20Photo%20810", "name":"stylusph
oto810", "options":$["job-sheets":"none,none"], "ppd":"/tmp/YaST2-32319-Qvl4zv/ppd_fkBcuYL", "ppd_info":$["filter":"foomatic-rip", "lang_encoding":"ISOLati
n1", "lang_version":"English", "language_level":3, "manufacturer":"Epson", "manufacturer_db":"EPSON", "model":" Stylus Photo 810", "model_db":"STYLUSPHOTO8
10", "nick":"Epson Stylus Photo 810 Foomatic/gimp-print (recommended)"], "ppd_options":$[], "raw":false, "state":"idle", "statemessage":"", "type":"yast2",
 "uri":"usb://EPSON/Stylus%20Photo%20810", "valid":true], $["accepting":true, "allowusers":[], "bannerend":"none", "bannerstart":"none", "changed":false, "
default":false, "denyusers":[], "info":"", "location":"", "name":"printer", "options":$["job-sheets":"none,none"], "ppd":"/tmp/YaST2-32319-Qvl4zv/ppd_fuo1c
dD", "ppd_info":$["filter":"", "lang_encoding":"MacStandard", "lang_version":"English", "language_level":3, "manufacturer":"HP", "manufacturer_db":"HP", "m
odel":" LaserJet 4100 Series", "model_db":"LASERJET4100SERIES", "nick":"HP LaserJet 4100 Series v.3010.107"], "ppd_options":$[], "raw":false, "state":"idle
", "statemessage":"", "type":"yast2", "uri":"socket://hp4100dtn:9100", "valid":true]
-->
    </itemizedlist>
  </section>
  <section id="detected_printer_struct">
    <title>Detected Printer Structure</title>
    <para>
To detect connected printers, the
<computeroutput>Printer::Detect</computeroutput>
function is used. It creates a list of detected printers.
    </para>
    <para>
Detected printer is described as a map with following keys:
    </para>
    <itemizedlist>
      <listitem><para><computeroutput>
"vendor" : string
      </computeroutput>
is the detected vendor (manufacturer) of the printer as was detected
      </para></listitem>
      <listitem><para><computeroutput>
"vendor_db" : string
      </computeroutput>
is the detected vendor (manufacturer) of the printer transformated
to the key for the database of drivers (see <xref linkend="database"/>).
      </para></listitem>
      <listitem><para><computeroutput>
"device" : string
      </computeroutput>
is the detected device (model) of the printer as was detected
      </para></listitem>
      <listitem><para><computeroutput>
"device_db" : string
      </computeroutput>
is the detected device (model) of the printer transformated
to the key for the database of drivers (see <xref linkend="database"/>).
      </para></listitem>
      <listitem><para><computeroutput>
"uri" : string
      </computeroutput>
contains the URI of the printer. The URI can be then passed to the
spooler.
      </para></listitem>
      <listitem><para><computeroutput>
"unique_key" : string
      </computeroutput>
is the hardware unique key. It is used to determine if a detected
printer was configured before.
      </para></listitem>
      <listitem><para><computeroutput>
"location" : string
      </computeroutput>
The description of location of the printer, derived from the URI
      </para></listitem>
      <listitem><para><computeroutput>
"info" : string
      </computeroutput>
Information of any kind about the printer, derived from the vendor and model
      </para></listitem>
    </itemizedlist>
  </section>
</chapter>
