<HTML>
<HEAD>
   <TITLE>YaST2 Printer configuration, TODO</TITLE>
   <STYLE type="text/css">
   BODY { 
     color: black;
     background: white
   }
   </STYLE>
</HEAD>
<BODY>
<H2>YaST2 Printer configuration, TODO</H2>
<ul>
<li>Change <b>layout of options</b> window. Everything is OK until there are no
depended options. Then change of option value changes following available
options and it is terrible for user.<br>
<small>We can use tree. We can use indentation in selection box.</small><br>
<font color="red">done via indentations</font>
</li>
<li>If <tt>/etc/gs.upp/*upp</tt> is edited by user, the changes are lost when
printconf saves next time. This should not happen because <b>upp files</b> are
here for user to fine-tune printer behaviour. <br>
<small>We must read settings from <tt>/etc/gs.upp/*.upp</tt> file, not from
<tt>/etc/gs.upp/*.yast2</tt>. Then we will reflect user settings. But there can
be a problem with depended options.:<pre>
Option PrinterType
Name="Epson", Value=""
  Suboption Resolution for Epson
    Name="720x720 DPI", Value="720x720 DPI"
    Name="1440x1440 DPI", Value="1440x1440 DPI"
Name="Canon", Value=""
  Suboption Resolution for Canon
    Name="720x720 DPI", Value="720x720 DPI"
    Name="1440x1440 DPI", Value="1440x1440 DPI"
</pre>
If "720x720 DPI" is selected, noone knows if it was for Canon or Epson. The
possibilities are:<ul>
<li>Take the first matching: bad, because it can destroy also user's settings
made in YaST2.</li>
<li>Save the last selected "path", look at pre-selected items, if not found,
take first matching.</li>
</ul>
Another problem: the option user changed need not to be in option list for that
printer. Solution: Show warning that options were edited. Show options that were
not-found in separate window. <br>
Another problem: User can choose options that would cause showing of two
concurent subtrees.<br>
Ultimate solution: When some conflict was found, show window that options are
not editable by YaST2, offer [reset] [let them as they are].<br>
<ul>
<li>Set "found"=0 for each option-&gt;value.</li>
<li>For each option found in <tt>printer.upp</tt>: try to found it in options,
if found, increase "found" in all nodes of path to found option.</li>
<li>For each option-&gt;value check if "found" is not &gt; 1. Otherwise there
can be conflict (if "found" is &gt; 1 in leaf, it is quite OK, one value was 2x
in .upp file).</li> 
<li>For each option, check if there are not two values with "found" != 0.
Otherwise there is conflict.</li> 
</ul>
Most ultimate solution:<br> If printconf finds that user edited upp file, it
does not allow editing. It offers reset. Maybe it will be necessarry because
finding if upp is edited consistently with yast2 is almost impossible. But it is
not big problem, because user will not be asked in each save, but only if he
will try to edit printer.<br>
<tt>ls -l --full-time /etc/gs.upp/file.upp | cut -b44-67</tt> gives  file-time.
We can add this time to <tt>/etc/gs.upp/file.yast2</tt>. 
</small><br>
<font color="red">done, most ultimate solution choosed</font>
</li>
<li>Printers <b>database loads too slowly</b> because for each string in database
correct language version in found. (There are maps like $[ "default" : "default
text", "cs" : "czech" , ... ]). The database will be changed to:
$["default": [ whole database in default language ], "cs": [ whole database in
default language ], ... ].<br>
<small>New script for generation of database with translation must be
done. New database will be much bigger (old - 907&nbsp;390, new -
2&nbsp;932&nbsp;872)</small><br>
<i>Another solution:</i> do not localize strings when loading database, but when
it is accessed. More than 2x faster loading of bd (and macros). Slower when
choosing manufacturer/model. Maybe some compromise between those two.<br>
<font color="red">done, localizing names and comments of manufacturers and models when
loading. options are localized on access</font>
</li>
<li>Progress bar for printconf initialization. After change of an implementation
of loading of db, prinfconf startup will be much faster, but progress bar will
be nice.<br><font color="red">done</font></li>
<li>#5525: editing of printer queue name(s). <br><font color="red">done</font></li>
<li>cleaning up workflow. What to ask when pressing back/next in complex
dialog? <br><font color="green">this will be never finished</font></li>
<li>#5261: some text changes<br><font color="green">this will be never finished</font></li>
<li>#5443: change connection selection dialog: there should be perhaps tree
with roots: "local printer" and "remote printer".
<br><font color="red">done</font></li>
<li>#5598: change some texts<br><font color="red">done</font></li>
<li>#5928: fix typo<br><font color="red">done</font></li>
<li>#5142: fix error message<br><font color="red">done</font></li>
<li>If printer is deleted, files <TT>/etc/apsfilterrc.y2prn_queuename</TT> and
<TT>/etc/gs.upp/y2prn_queuename.upp</TT> rest. Delete these files! There can be
a problem, because not all printers must be defined by YaST2/apsfilter.
<br><font color="red">done</font></li>
<li>There is twice 9600 in baudrate in serial-dialog.</li>
</ul>
<hr>
</BODY></HTML>
